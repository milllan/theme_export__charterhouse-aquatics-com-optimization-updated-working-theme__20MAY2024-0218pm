{%- comment -%}
************************************************************************
* NOTE: This file is generated by the Flair app and should not be modified.
*
* Any changes made to this file will be overwritten the next time you change
* your Flair settings.
*
* Flair: https://apps.shopify.com/flair
*
* Copyright Brainy Atom LLC, All Rights Reserved.
*
* Last updated: 2024-05-16T12:55:29Z
************************************************************************
{%- endcomment -%}
{%- liquid
  if search.performed
    assign flair_terms = search.terms | split: ' OR '
    assign flair_collection = collection
    assign flair_layout = ''
    assign flair_page_type = ''
    for t in flair_terms
      assign kv = t | split: ':'
      assign k = kv[0] | url_decode
      assign v = kv[1] | url_decode
      if k == '_col'
        assign flair_collection = collections[v]
      elsif k == '_lay'
        assign flair_layout = v | remove: '&quot;'
      elsif k == '_pag'
        assign flair_page_type = v
      elsif k == '_var'
        assign _parts = v | split: '|'
        assign flair_variant_product_id = _parts[0] | plus: 0
        assign flair_variant_id = _parts[1] | plus: 0
      endif
    endfor

    paginate search.results by 1000
      for item in search.results
        assign flair_variant = blank
        if flair_variant_id and item.id == flair_variant_product_id
          for v in item.variants
            if flair_variant_id == v.id
              assign flair_variant = v
              break
            endif
          endfor
        endif
        render 'flair-product-badges' collection: flair_collection, product: item, flair_layout: flair_layout, flair_page_type: flair_page_type, flair_variant: flair_variant
      endfor
    endpaginate
  else
    render 'flair-product-badges' product: product
  endif
-%}
{%- schema -%}
  {
    "name": "Flair product badges",
    "settings": []
  }
{%- endschema -%}
{%- stylesheet -%}{%- endstylesheet -%}
{%- javascript -%}{%- endjavascript -%}
